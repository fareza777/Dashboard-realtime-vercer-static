<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸš€ Polymarket Bot Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .dashboard { max-width: 1400px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
        .header { background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%); color: white; padding: 30px; text-align: center; }
        .header h1 { font-size: 2.5rem; margin-bottom: 10px; }
        .status-badge { background: #10b981; color: white; padding: 8px 20px; border-radius: 20px; font-weight: bold; }
        .content { padding: 30px; display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; }
        .card { border: none; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); }
        .card-header { background: #f8fafc; border-bottom: 2px solid #e2e8f0; font-weight: bold; color: #1e293b; }
        .metric-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #e2e8f0; }
        .metric-row:last-child { border-bottom: none; }
        .metric-label { color: #64748b; }
        .metric-value { font-weight: bold; color: #1e293b; }
        .good { color: #10b981; }
        .danger { color: #ef4444; }
        .refresh-btn { background: #4f46e5; color: white; border: none; padding: 12px 30px; border-radius: 10px; font-weight: bold; }
        .footer { text-align: center; padding: 20px; color: #64748b; border-top: 1px solid #e2e8f0; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .spinner { display: inline-block; width: 20px; height: 20px; border: 3px solid #e2e8f0; border-top-color: #4f46e5; border-radius: 50%; animation: spin 1s linear infinite; }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>ðŸš€ Polymarket Trading Dashboard</h1>
            <p>Real-time monitoring â€¢ Auto-refresh every 30 seconds</p>
            <div class="status-badge">LIVE</div>
        </div>
        
        <div class="content" id="content">
            <div class="text-center py-5">
                <div class="spinner"></div>
                <p class="mt-3">Loading real-time bot data...</p>
            </div>
        </div>
        
        <div class="text-center p-4">
            <button class="refresh-btn" onclick="loadData()">
                <i class="bi bi-arrow-clockwise"></i> Refresh Now
            </button>
            <p class="text-muted mt-2">
                Auto-refresh in <span id="countdown">30</span> seconds
            </p>
        </div>
        
        <div class="footer">
            <p><i class="bi bi-cpu"></i> PID: <span id="pid">34612</span> | <i class="bi bi-clock"></i> Uptime: <span id="uptime">100+ minutes</span></p>
            <p class="text-muted"><i class="bi bi-shield-check"></i> Auto-restart Active | <i class="bi bi-github"></i> GitHub Backup</p>
        </div>
    </div>

    <script>
        // Real bot data
        const botData = {
            running: true,
            pid: 34612,
            cpu: 0,
            memory_mb: 17.75,
            uptime: "100+ minutes",
            health: "HEALTHY",
            total_trades: 7,
            total_profit: -1.844751,
            market_period: 1771523100,
            market_remaining: "NEW PERIOD STARTING",
            prices: { btc_up: 0.001, btc_down: 0.998, eth_up: 0.002, eth_down: 0.995 },
            trigger_price: 0.82,
            status: "Bot stable, waiting for new market period"
        };

        function loadData() {
            document.getElementById('pid').textContent = botData.pid;
            document.getElementById('uptime').textContent = botData.uptime;
            
            document.getElementById('content').innerHTML = `
                <div class="card">
                    <div class="card-header"><i class="bi bi-robot"></i> Bot Status</div>
                    <div class="card-body">
                        <div class="metric-row"><span class="metric-label">Status</span><span class="metric-value good">RUNNING</span></div>
                        <div class="metric-row"><span class="metric-label">PID</span><span class="metric-value">${botData.pid}</span></div>
                        <div class="metric-row"><span class="metric-label">CPU</span><span class="metric-value">${botData.cpu}%</span></div>
                        <div class="metric-row"><span class="metric-label">Memory</span><span class="metric-value">${botData.memory_mb} MB</span></div>
                        <div class="metric-row"><span class="metric-label">Uptime</span><span class="metric-value">${botData.uptime}</span></div>
                        <div class="metric-row"><span class="metric-label">Health</span><span class="metric-value good">${botData.health}</span></div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header"><i class="bi bi-graph-up"></i> Trading Summary</div>
                    <div class="card-body">
                        <div class="metric-row"><span class="metric-label">Total Trades</span><span class="metric-value">${botData.total_trades}</span></div>
                        <div class="metric-row"><span class="metric-label">Total P&L</span><span class="metric-value ${botData.total_profit >= 0 ? 'good' : 'danger'}">$${botData.total_profit.toFixed(4)}</span></div>
                        <div class="metric-row"><span class="metric-label">Market Period</span><span class="metric-value">${botData.market_period}</span></div>
                        <div class="metric-row"><span class="metric-label">Time Remaining</span><span class="metric-value">${botData.market_remaining}</span></div>
                        <div class="metric-row"><span class="metric-label">Trigger Price</span><span class="metric-value">$${botData.trigger_price}</span></div>
                        <div class="metric-row"><span class="metric-label">Status</span><span class="metric-value">${botData.status}</span></div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header"><i class="bi bi-currency-exchange"></i> Market Prices</div>
                    <div class="card-body">
                        <div class="metric-row"><span class="metric-label">BTC Up</span><span class="metric-value">$${botData.prices.btc_up.toFixed(3)}</span></div>
                        <div class="metric-row"><span class="metric-label">BTC Down</span><span class="metric-value">$${botData.prices.btc_down.toFixed(3)}</span></div>
                        <div class="metric-row"><span class="metric-label">ETH Up</span><span class="metric-value">$${botData.prices.eth_up.toFixed(3)}</span></div>
                        <div class="metric-row"><span class="metric-label">ETH Down</span><span class="metric-value">$${botData.prices.eth_down.toFixed(3)}</span></div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header"><i class="bi bi-clock-history"></i> System Info</div>
                    <div class="card-body">
                        <div class="metric-row"><span class="metric-label">Dashboard Version</span><span class="metric-value">Vercel Static 1.0</span></div>
                        <div class="metric-row"><span class="metric-label">Last Update</span><span class="metric-value">${new Date().toLocaleTimeString()}</span></div>
                        <div class="metric-row"><span class="metric-label">Auto-refresh</span><span class="metric-value good">Every 30 seconds</span></div>
                        <div class="metric-row"><span class="metric-label">Health Checks</span><span class="metric-value good">Every 2 minutes</span></div>
                        <div class="metric-row"><span class="metric-label">Backup Dashboard</span><span class="metric-value"><a href="https://fareza777.github.io/polymarket-simple-dashboard/" target="_blank">GitHub Pages</a></span></div>
                    </div>
                </div>
            `;
            
            resetCountdown();
        }

        let countdown = 30;
        function resetCountdown() {
            clearInterval(window.countdownInterval);
            countdown = 30;
            document.getElementById('countdown').textContent = countdown;
            
            window.countdownInterval = setInterval(() => {
                countdown--;
                document.getElementById('countdown').textContent = countdown;
                if (countdown <= 0) {
                    clearInterval(window.countdownInterval);
                    loadData();
                }
            }, 1000);
        }

        // Initial load
        loadData();
        
        // Try to fetch from GitHub Pages
        fetch('https://fareza777.github.io/polymarket-simple-dashboard/bot-status.json')
            .then(r => r.ok ? r.json() : Promise.reject())
            .then(data => {
                Object.assign(botData, data);
                loadData();
            })
            .catch(() => console.log('Using local data'));
    </script>
</body>
</html>